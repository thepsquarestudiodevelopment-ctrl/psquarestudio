<!DOCTYPE html>
<html class="no-js" lang="zxx">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>PSquare Studio</title>
    <meta name="description" content="PSquare Studio" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      /* ---------- existing resets & buttons ---------- */
      button {
        border: 0;
        background: transparent;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
      }
      button.active {
        background: #111;
        color: #fff;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
      }
      .td-portfolio-filter-btn button:hover {
        opacity: 0.92;
      }

      /* ---------- card container ---------- */
      .td-portfolio-filter-wrapper {
        position: relative;
        border-radius: 16px;
        overflow: hidden;
        background: #000;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        transition: 0.25s ease;
        min-height: 220px;
      }
      .td-portfolio-filter-wrapper:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.18);
      }

      /* ---------- media equal size ---------- */
      .td-portfolio-filter-thumb img,
      .td-portfolio-filter-thumb video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        aspect-ratio: 3 / 3;
        display: block;
        background: #111;
      }
      .td-portfolio-filter-thumb {
        width: 100%;
        height: 100%;
      }
      .td-portfolio-filter-thumb video {
        aspect-ratio: 3 / 3;
      }

      /* bottom gradient + label */
      .td-portfolio-filter-wrapper::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 45%;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.55), transparent);
        z-index: 5;
      }
      .portfolio-label {
        position: absolute;
        left: 0;
        bottom: 0;
        padding: 16px 20px;
        width: 100%;
        font-size: 18px;
        font-weight: 600;
        color: #fff;
        z-index: 10;
      }
      .mb-30 {
        margin-bottom: 35px !important;
      }

      /* ---------- MOBILE HORIZONTAL SCROLL ---------- */
      .portfolio-filter-scroll {
        width: 100%;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
        padding-bottom: 12px;
        cursor: grab;
        -webkit-overflow-scrolling: touch;
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
      }
      .portfolio-filter-scroll:active {
        cursor: grabbing;
      }
      .portfolio-filter-scroll::-webkit-scrollbar {
        display: none;
        height: 8px;
      }
      .portfolio-filter-scroll .td-portfolio-filter-btn {
        display: inline-flex;
        gap: 12px;
        align-items: center;
        padding-left: 12px;
      }
      .portfolio-filter-scroll button {
        white-space: nowrap;
        background: #f1f1f1;
        color: #111;
        padding: 9px 14px;
        font-size: 14px;
      }
      @media (min-width: 768px) {
        .portfolio-filter-scroll {
          overflow: visible;
          white-space: normal;
          padding-bottom: 0;
          cursor: default;
        }
        .portfolio-filter-scroll .td-portfolio-filter-btn {
          display: flex;
          justify-content: center;
          gap: 18px;
          padding-left: 0;
        }
        .portfolio-filter-scroll button {
          background: transparent;
          color: inherit;
          padding: 8px 12px;
        }
        .portfolio-filter-scroll button.active {
          background: #111;
          color: #fff;
        }
      }

      /* grid spacing */
      .grid {
        margin-left: -15px;
        margin-right: -15px;
      }
      .grid .col-lg-4 {
        padding-left: 15px;
        padding-right: 15px;
        margin-bottom: 30px;
      }

      /* header & nav baseline */
      .header-area {
        padding: 18px 0;
        background: #fff;
        position: sticky;
        top: 0;
        z-index: 999;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }
      .header-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 18px;
      }
      .logo img {
        height: 42px;
        display: block;
      }
      nav .nav-menu {
        list-style: none;
        display: flex;
        gap: 18px;
        align-items: center;
        margin: 0;
        padding: 0;
      }
      nav .nav-menu li a {
        text-decoration: none;
        color: #111;
        font-weight: 600;
        padding: 6px 8px;
      }
      .cta-button {
        background: #111;
        color: #fff;
        padding: 8px 14px;
        border-radius: 8px;
      }

      /* mobile menu */
      .mobile-toggle {
        display: none;
        background: transparent;
        border: 0;
      }
      .mobile-menu {
        display: none;
        position: fixed;
        top: 0;
        right: 0;
        width: 320px;
        height: 100vh;
        background: #fff;
        box-shadow: -8px 0 24px rgba(0, 0, 0, 0.1);
        padding: 30px;
        z-index: 1000;
      }
      .mobile-menu .close-menu {
        background: transparent;
        border: 0;
        font-size: 28px;
        position: absolute;
        top: 10px;
        right: 14px;
        cursor: pointer;
      }
      .overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
        z-index: 999;
      }
      @media (max-width: 991px) {
        nav .nav-menu {
          display: none;
        }
        .mobile-toggle {
          display: inline-block;
        }
      }

      /* footer baseline */
      footer .td-footer-area {
        background: #0b0b0b;
        color: #fff;
        padding: 60px 0;
      }
      footer .td-footer-area a {
        color: #fff;
        text-decoration: none;
      }

      /* ==========================
         LIGHTBOX + THUMBNAILS
         ========================== */

      /* overlay */
      #lightboxOverlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.95);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 99999;
        padding: 20px;
      }

      /* content wrapper: main preview + thumbnails */
      #lightboxContent {
        width: 100%;
        max-width: 1100px;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        gap: 12px;
        position: relative;
        align-items: center;
        justify-content: center;
      }

      /* main preview area */
      .lb-main {
        width: 100%;
        max-height: 78vh;
        background: transparent;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }
      .lb-main img,
      .lb-main video {
        width: 100%;
        height: auto;
        max-height: 78vh;
        border-radius: 10px;
        object-fit: contain;
      }

      /* tiny film-strip thumbnails row */
      .lb-thumbs {
        width: 100%;
        display: flex;
        align-items: center;
        gap: 8px;
        overflow-x: auto;
        padding: 8px 6px;
        -webkit-overflow-scrolling: touch;
      }
      .lb-thumbs::-webkit-scrollbar {
        height: 8px;
      }
      .lb-thumb {
        flex: 0 0 auto;
        width: 94px; /* film-strip small thumb width */
        height: 56px; /* small fixed height (film-strip feel) */
        border-radius: 6px;
        overflow: hidden;
        background: #111;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        border: 2px solid transparent;
      }
      .lb-thumb img,
      .lb-thumb video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      /* highlight active thumbnail */
      .lb-thumb.active {
        border-color: #fff;
        transform: scale(1.03);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
      }

      /* navigation, close and loader */
      #lightboxClose {
        position: absolute;
        top: 12px;
        right: 12px;
        font-size: 34px;
        color: #fff;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.06);
        padding: 6px 12px;
        border-radius: 8px;
        z-index: 100010;
      }
      .lb-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 34px;
        color: white;
        cursor: pointer;
        padding: 10px 14px;
        background: rgba(255, 255, 255, 0.04);
        border-radius: 50%;
        user-select: none;
        z-index: 100010;
      }
      #lbPrev {
        left: 18px;
      }
      #lbNext {
        right: 18px;
      }
      @media (max-width: 600px) {
        #lightboxClose {
          font-size: 26px;
          top: 8px;
          right: 8px;
        }
        .lb-nav {
          font-size: 26px;
          padding: 8px 10px;
        }
        .lb-thumb {
          width: 76px;
          height: 48px;
        }
      }

      .lb-loader {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        border: 4px solid rgba(255, 255, 255, 0.12);
        border-top-color: #fff;
        animation: spin 1s linear infinite;
        position: absolute;
        z-index: 100005;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* accessibility focus rings */
      button:focus,
      a:focus,
      .lb-thumb:focus {
        outline: 3px solid rgba(255, 255, 255, 0.08);
        outline-offset: 2px;
      }
    </style>
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="assets/img/logo/Asset1.png"
    />
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/header.css" />
    <!--<< Bootstrap min.css >>-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <!--<< magnific-popup.css >>-->
    <link rel="stylesheet" href="assets/css/magnific-popup.css" />
    <!--<< fontawesome-all.min.css >>-->
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css" />
    <!--<< swiper-bundle.min.css >>-->
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css" />
    <!--<< odometer.css >>-->
    <link rel="stylesheet" href="assets/css/odometer.css" />
    <!--<< ion.rangeSlider.min.css >>-->
    <link rel="stylesheet" href="assets/css/ion.rangeSlider.min.css" />
    <!--<< effect-slicer.css >>-->
    <link rel="stylesheet" href="assets/css/effect-slicer.css" />
    <!--<< animate.css >>-->
    <link rel="stylesheet" href="assets/css/animate.css" />
    <!--<< default.css >>-->
    <link rel="stylesheet" href="assets/css/defauls-spacing.css" />
    <!--<< main.css >>-->
    <link rel="stylesheet" href="assets/css/main.css" />
  </head>

  <body>
    <!-- Preloader Start -->
    <div id="preloader" class="preloader">
      <div class="animation-preloader">
        <div class="spinner"></div>
        <div class="txt-loading">
          <span data-text-preloader="P" class="letters-loading"> P </span>
          <span data-text-preloader="S" class="letters-loading"> S </span>
          <span data-text-preloader="Q" class="letters-loading"> Q </span>
          <span data-text-preloader="U" class="letters-loading"> U </span>
          <span data-text-preloader="A" class="letters-loading"> A </span>
          <span data-text-preloader="R" class="letters-loading"> R </span>
          <span data-text-preloader="E" class="letters-loading"> E </span>
        </div>
        <p class="text-center">Loading</p>
      </div>
      <div class="loader">
        <div class="row">
          <div class="col-3 loader-section section-left">
            <div class="bg"></div>
          </div>
          <div class="col-3 loader-section section-left">
            <div class="bg"></div>
          </div>
          <div class="col-3 loader-section section-right">
            <div class="bg"></div>
          </div>
          <div class="col-3 loader-section section-right">
            <div class="bg"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Start Cursor Pointer -->

    <div class="mouse-follower">
      <span class="cursor-outline"></span>
      <span class="cursor-dot"></span>
    </div>
    <!-- End Cursor Pointer -->

    <!-- Scroll-top -->
    <button class="scroll__top scroll-to-target" data-target="html">
      <i class="fa-sharp fa-regular fa-arrow-up"></i>
    </button>
    <!-- Scroll-top-end-->

    <!-- header-area -->
    <header class="header-area">
      <div class="header-container">
        <!-- Logo -->
        <div class="logo">
          <a href="index.html">
            <!-- Replace with your actual logo -->
            <img src="assets/img/logo/Asset1.png" alt="Company Logo" />
          </a>
        </div>

        <!-- Desktop Navigation -->
        <nav>
          <ul class="nav-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">Who We Are</a></li>
            <li><a href="portfolio-three-columns.html">Portfolio</a></li>
            <li><a href="service.html">Services</a></li>
            <li><a href="contact.html">Contact Us</a></li>
            <li>
              <button
                class="cta-button"
                onclick="window.location.href='contact.html'"
              >
                Get Started
              </button>
            </li>
          </ul>
        </nav>

        <!-- Mobile Menu Toggle -->
        <button class="mobile-toggle" id="mobileToggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>

      <!-- Mobile Menu -->
      <div class="mobile-menu" id="mobileMenu">
        <button class="close-menu" id="closeMenu">×</button>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">Who We Are</a></li>
          <li><a href="portfolio-three-columns.html">Portfolio</a></li>
          <li><a href="service.html">Services</a></li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul>
        <a href="contact.html"
          ><button class="cta-button">Get Started</button></a
        >
      </div>

      <!-- Overlay -->
      <div class="overlay" id="overlay"></div>
    </header>
    <!-- header-area-end -->

    <div id="smooth-wrapper">
      <div id="smooth-content">
        <main>
          <!-- td-breadcrumb-area-start -->
          <div class="td-breadcrumb-area td-breadcrumb-spacing mb-75">
            <div class="container">
              <div class="row">
                <div class="col-lg-9">
                  <div class="td-breadcrumb-wrap">
                    <span
                      class="subtitle d-inline-block mb-10 wow fadeInLeft"
                      data-wow-delay=".5s"
                      data-wow-duration="1s"
                      > PORTFOLIO</span
                    >
                    <h2
                      class="td-section-page-title td-section-page-bigtitle mb-35 wow fadeInLeft"
                      data-wow-delay=".7s"
                      data-wow-duration="1s"
                    >
                      Visual <span>Collection</span>
                    </h2>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- td-breadcrumb-area-end -->

          <!-- td-portfolio-area-start -->
          <div
            class="td-portfolio-filter-area td-portfolio-filter-three pb-160"
          >
            <div class="container-fluid container-1830">
              <div class="row">
                <div
                  class="col-lg-12 mb-50 wow fadeInUp"
                  data-wow-delay=".5s"
                  data-wow-duration="1s"
                >
                  <div
                    class="td-portfolio-filter-btn text-center masonary-menu"
                  >
                    <button data-filter="*" class="active">SHOW ALL</button>
                    <button data-filter=".prof">Graphic Design</button>
                    <button data-filter=".prof1">Motion Ads</button>
                    <button data-filter=".prof2">Video Editing</button>
                    <button data-filter=".prof3">3D Architecture</button>
                    <button data-filter=".prof4">CGI</button>
                    <button data-filter=".prof4">Set Design</button>
                  </div>
                </div>
              </div>
              <div class="grid row" id="portfolioGrid">
                <!-- 3d architecture images start -->
                <!-- Item 1 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/3D Architecture/1.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 2 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/3D Architecture/2.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 3 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/3D Architecture/3.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 4 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/3D Architecture/4.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 5 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/3D Architecture/5.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- 3d architecture images end -->
                <!-- cgi videos start -->
                <!-- Item 1 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/CGI/1.mp4"
                        data-thumb="assets/img/portfolio/CGI/thumbnail_1.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- Item 2 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/CGI/2.mp4"
                        data-thumb="assets/img/portfolio/CGI/thumbnail_2.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- Item 3 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/CGI/3.mp4"
                        data-thumb="assets/img/portfolio/CGI/thumbnail_3.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- Item 4 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/CGI/4.mp4"
                        data-thumb="assets/img/portfolio/CGI/thumbnail_4.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- cgi videos end -->
                <!-- set design images start -->
                <!-- Item 1 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/1.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 2 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/2.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 3 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/3.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 4 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/4.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 5 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/5.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 6 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/6.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 7 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/7.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 8 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/8.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 9 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/9.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 10 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/10.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 11 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/11.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 12 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/12.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 13 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/13.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 14 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/14.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 15 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/15.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 16 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/16.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 17 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/17.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- Item 18 -->
                <div class="col-lg-4 col-md-6 grid-item prof prof1 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Project Title 1"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <img
                        data-src="assets/img/portfolio/Set design/18.jpg"
                        alt="Project 1"
                        class="lazy"
                      />
                    </div>
                  </div>
                </div>
                <!-- set design images end -->
                <!-- motion graphics videos start -->
                <!-- Item 1 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/Motion graphics/1.mp4"
                        data-thumb="assets/img/portfolio/Motion graphics/thumbnail_1.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- Item 2 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/Motion graphics/2.mp4"
                        data-thumb="assets/img/portfolio/Motion graphics/thumbnail_2.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- Item 3 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/Motion graphics/3.mp4"
                        data-thumb="assets/img/portfolio/Motion graphics/thumbnail_3.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- Item 4 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/Motion graphics/4.mp4"
                        data-thumb="assets/img/portfolio/Motion graphics/thumbnail_4.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- Item 5 -->
                <div class="col-lg-4 col-md-6 grid-item prof2 mb-30">
                  <div
                    class="td-portfolio-filter-wrapper"
                    tabindex="0"
                    role="button"
                    aria-label="Open Motion Ad 2"
                  >
                    <div class="td-portfolio-filter-thumb">
                      <video
                        class="lazy-video"
                        autoplay="true"
                        muted
                        loop
                        playsinline
                        preload="metadata"
                        data-src="assets/img/portfolio/Motion graphics/5.mp4"
                        data-thumb="assets/img/portfolio/Motion graphics/thumbnail_5.jpg"
                      ></video>
                    </div>
                  </div>
                </div>
                <!-- motion graphic videos end -->
                <!-- Add more items as needed -->
              </div>

              <div class="row">
                <div class="col-12">
                  <div class="d-flex justify-content-center mt-50">
                    <div class="td-btn-group">
                      <a class="td-btn-circle" href="service.html">
                        <i class="fa-solid fa-arrow-right"></i>
                      </a>
                      <a class="td-btn-2 td-btn-primary" href="service.html"
                        >SEE MORE PROJECT</a
                      >
                      <a class="td-btn-circle" href="service.html">
                        <i class="fa-solid fa-arrow-right"></i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- td-portfolio-area-end -->
        </main>
        <!-- LIGHTBOX OVERLAY: MAIN + THUMBNAILS -->
        <div id="lightboxOverlay" aria-hidden="true">
          <button id="lightboxClose" aria-label="Close lightbox">×</button>
          <button id="lbPrev" class="lb-nav" aria-label="Previous">❮</button>
          <button id="lbNext" class="lb-nav" aria-label="Next">❯</button>

          <!-- lightboxContent now contains .lb-main (main preview) and .lb-thumbs (film-strip) -->
          <div id="lightboxContent" role="dialog" aria-modal="true">
            <div
              class="lb-main"
              id="lbMainArea"
              tabindex="0"
              aria-live="polite"
            >
              <!-- main preview is injected by JS (image or video element) -->
            </div>

            <!-- thumbnails film-strip -->
            <div
              class="lb-thumbs"
              id="lbThumbs"
              role="toolbar"
              aria-label="Gallery thumbnails"
            >
              <!-- thumbnails injected by JS -->
            </div>

            <div id="lbLoader" class="lb-loader" style="display: none"></div>
          </div>
        </div>
        <!-- footer-area-start -->
        <footer>
          <br />
          <br />
          <div class="td-footer-area td-footer-2-wrap">
            <div class="container">
              <div class="row">
                <div class="col-lg-6 mb-30">
                  <div class="td-footer-3-widget">
                    <h2 class="td-footer-2-bigtitle">
                      Entrust design<br />
                      to professionals
                    </h2>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 mb-30">
                  <div class="td-footer-3-widget">
                    <h4 class="td-footer-3-title mb-15">India</h4>
                    <a class="links mb-40 d-inline-block" href="#"
                      >Ranip —<br />
                      Ahmedabad, Gujarat</a
                    >

                    <div class="td-footer-3-social">
                      <a href="http://www.facebook.com/PSQUAERE?mibextid=ZbWKwL"
                        ><i class="fa-brands fa-facebook-f"></i
                      ></a>
                      <a
                        href="https://www.linkedin.com/company/the-psquare-studio/?viewAsMember=true"
                        ><i class="fa-brands fa-linkedin-in"></i
                      ></a>
                      <a href="https://www.instagram.com/thepsquarestudio/"
                        ><i class="fa-brands fa-instagram"></i
                      ></a>
                      <a
                        href="https://api.whatsapp.com/send/?phone=%2B919898709490&text&type=phone_number&app_absent=0"
                        ><i class="fa-brands fa-whatsapp"></i
                      ></a>
                    </div>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 mb-30">
                  <div class="td-footer-3-widget">
                    <h4 class="td-footer-3-title mb-15">Say hello!</h4>
                    <a class="links links-3 d-block mb-5" href="#"
                      >thepsquarestudio25@gmail.com</a
                    >
                    <a class="links-2" href="tel:+1234567890"
                      >+91 98987 09490</a
                    >
                  </div>
                </div>
              </div>
            </div>
            <div class="container">
              <div class="td-footer-2-border mt-60">
                <div class="row align-items-center">
                  <div class="col-lg-8">
                    <div class="td-footer-3-menu mb-10">
                      <ul>
                        <li>
                          <a href="about.html">Who We Are</a>
                        </li>
                        <li>
                          <a href="portfolio-two-columns.html">Portfolio</a>
                        </li>
                        <li><a href="service.html">Services</a></li>
                        <!-- <li><a href="#">Blog</a></li> -->
                        <li><a href="contact.html">Contact</a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="col-lg-4">
                    <div class="td-footer-3-copyright text-lg-end mb-10">
                      <p>
                        © 2025 <a href="#">PSQUARE.</a> All Rights Reserved.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </footer>
        <!-- footer-area-end -->
      </div>
    </div>

    <!-- JS here -->
    <!--<< jquery.Js >>-->
    <script src="assets/js/vendor/jquery.js"></script>
    <!--<< bootstrap.min.Js >>-->
    <script src="assets/js/bootstrap.min.js"></script>
    <!--<< gsap.Js >>-->
    <script src="assets/js/jsap/gsap.js"></script>
    <!--<< gsap-scroll-smoother.Js >>-->
    <script src="assets/js/jsap/gsap-scroll-smoother.js"></script>
    <!--<< gsap-scroll-trigger.Js >>-->
    <script src="assets/js/jsap/gsap-scroll-trigger.js"></script>
    <!--<< gsap-scroll-to-plugin.Js >>-->
    <script src="assets/js/jsap/gsap-scroll-to-plugin.js"></script>
    <!--<< gsap-split-text.Js >>-->
    <script src="assets/js/jsap/gsap-split-text.js"></script>
    <!--<< isotope.pkgd.min.Js >>-->
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <!--<< ion.rangeSlider.min.Js >>-->
    <script src="assets/js/ion.rangeSlider.min.js"></script>
    <!--<< effect-slicer.Js >>-->
    <script src="assets/js/effect-slicer.js"></script>
    <!--<< imagesloaded.pkgd.min.Js >>-->
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <!--<< jquery.magnific-popup.min.Js >>-->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!--<< jquery.odometer.min.Js >>-->
    <script src="assets/js/jquery.odometer.min.js"></script>
    <!--<< jquery-appear.Js >>-->
    <script src="assets/js/jquery-appear.js"></script>
    <!--<< swiper-bundle.min.Js >>-->
    <script src="assets/js/swiper-bundle.min.js"></script>
    <!--<< jquery.nice-select.min.Js >>-->
    <script src="assets/js/nice-select.js"></script>
    <!--<< wow.Js >>-->
    <script src="assets/js/wow.js"></script>
    <!--<< ajax-form.Js >>-->
    <script src="assets/js/ajax-form.js"></script>
    <!--<< main.Js >>-->
    <script src="assets/js/main.js"></script>
    <!-- ===========================
         DRAG SCROLL + ISOTOPE + LAZY + LIGHTBOX (with thumbnails)
         =========================== -->
    <script>
      (function () {
        // set year
        const yElem = document.getElementById("yearNow");
        if (yElem) yElem.textContent = new Date().getFullYear();

        /* -----------------------
           MOBILE FILTER SCROLL (drag-to-scroll)
           ----------------------- */
        const scrollContainer = document.getElementById(
          "portfolioFilterScroll"
        );
        if (scrollContainer) {
          let isDown = false;
          let startX;
          let scrollLeft;

          // Mouse events
          scrollContainer.addEventListener("mousedown", (e) => {
            isDown = true;
            scrollContainer.classList.add("active");
            startX = e.pageX - scrollContainer.offsetLeft;
            scrollLeft = scrollContainer.scrollLeft;
            e.preventDefault();
          });
          scrollContainer.addEventListener("mouseleave", () => {
            isDown = false;
            scrollContainer.classList.remove("active");
          });
          scrollContainer.addEventListener("mouseup", () => {
            isDown = false;
            scrollContainer.classList.remove("active");
          });
          scrollContainer.addEventListener("mousemove", (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - scrollContainer.offsetLeft;
            const walk = (x - startX) * 1.5;
            scrollContainer.scrollLeft = scrollLeft - walk;
          });

          // Touch events
          let touchStartX = 0;
          let touchScrollLeft = 0;
          scrollContainer.addEventListener(
            "touchstart",
            (e) => {
              touchStartX = e.touches[0].pageX - scrollContainer.offsetLeft;
              touchScrollLeft = scrollContainer.scrollLeft;
            },
            { passive: true }
          );
          scrollContainer.addEventListener(
            "touchmove",
            (e) => {
              const x = e.touches[0].pageX - scrollContainer.offsetLeft;
              const walk = (x - touchStartX) * 1.2;
              scrollContainer.scrollLeft = touchScrollLeft - walk;
            },
            { passive: true }
          );
        }

        /* -----------------------
           ISOTOPE INIT
           ----------------------- */
        function initIsotope() {
          const grid = document.querySelector("#portfolioGrid");
          const filterButtons = document.querySelectorAll(
            ".td-portfolio-filter-btn button"
          );
          if (!grid) return;

          imagesLoaded(grid, function () {
            const iso = new Isotope(grid, {
              itemSelector: ".grid-item",
              layoutMode: "masonry",
              percentPosition: true,
              masonry: { columnWidth: ".grid-item" },
            });

            filterButtons.forEach((btn) => {
              btn.addEventListener("click", function () {
                const filterValue = btn.getAttribute("data-filter") || "*";
                iso.arrange({ filter: filterValue });

                filterButtons.forEach((b) => {
                  b.classList.remove("active");
                  b.setAttribute("aria-pressed", "false");
                });
                btn.classList.add("active");
                btn.setAttribute("aria-pressed", "true");

                // center clicked filter button on mobile
                if (scrollContainer && window.innerWidth < 768) {
                  const btnRect = btn.getBoundingClientRect();
                  const containerRect = scrollContainer.getBoundingClientRect();
                  const offset =
                    btnRect.left -
                    containerRect.left -
                    containerRect.width / 2 +
                    btnRect.width / 2;
                  scrollContainer.scrollBy({
                    left: offset,
                    behavior: "smooth",
                  });
                }
              });
            });

            window.addEventListener("resize", function () {
              iso.layout();
            });
          });
        }
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initIsotope);
        } else {
          initIsotope();
        }

        /* -----------------------
           MOBILE MENU
           ----------------------- */
        const mobileToggle = document.getElementById("mobileToggle");
        const mobileMenu = document.getElementById("mobileMenu");
        const closeMenu = document.getElementById("closeMenu");
        const overlay = document.getElementById("overlay");
        function openMobileMenu() {
          if (mobileMenu) {
            mobileMenu.style.display = "block";
            mobileMenu.setAttribute("aria-hidden", "false");
          }
          if (overlay) overlay.style.display = "block";
          if (mobileToggle) mobileToggle.setAttribute("aria-expanded", "true");
        }
        function closeMobile() {
          if (mobileMenu) {
            mobileMenu.style.display = "none";
            mobileMenu.setAttribute("aria-hidden", "true");
          }
          if (overlay) overlay.style.display = "none";
          if (mobileToggle) mobileToggle.setAttribute("aria-expanded", "false");
        }
        if (mobileToggle)
          mobileToggle.addEventListener("click", openMobileMenu);
        if (closeMenu) closeMenu.addEventListener("click", closeMobile);
        if (overlay) overlay.addEventListener("click", closeMobile);

        // Preloader hide
        window.addEventListener("load", function () {
          const pre = document.getElementById("preloader");
          if (pre) pre.style.display = "none";
        });

        /* ======================
           LAZY LOADING
           ====================== */
        const lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));
        const lazyVideos = [].slice.call(
          document.querySelectorAll("video.lazy-video")
        );

        if ("IntersectionObserver" in window) {
          const lazyImageObserver = new IntersectionObserver(
            function (entries, observer) {
              entries.forEach(function (entry) {
                if (entry.isIntersecting) {
                  const img = entry.target;
                  const src = img.dataset.src;
                  if (src) {
                    img.src = src;
                    img.removeAttribute("data-src");
                  }
                  img.classList.remove("lazy");
                  lazyImageObserver.unobserve(img);
                }
              });
            },
            { rootMargin: "200px 0px" }
          );

          lazyImages.forEach(function (img) {
            lazyImageObserver.observe(img);
          });

          const lazyVideoObserver = new IntersectionObserver(
            function (entries, observer) {
              entries.forEach(function (entry) {
                if (entry.isIntersecting) {
                  const video = entry.target;
                  const src = video.dataset.src;
                  if (src) {
                    const source = document.createElement("source");
                    source.src = src;
                    source.type = "video/mp4";
                    video.appendChild(source);
                  }
                  video.load();
                  video.classList.remove("lazy-video");
                  lazyVideoObserver.unobserve(video);
                }
              });
            },
            { rootMargin: "400px 0px" }
          );

          lazyVideos.forEach(function (video) {
            lazyVideoObserver.observe(video);
          });
        } else {
          // Fallback: load all immediately
          lazyImages.forEach(function (img) {
            img.src = img.dataset.src;
            img.classList.remove("lazy");
          });
          lazyVideos.forEach(function (video) {
            const source = document.createElement("source");
            source.src = video.dataset.src;
            source.type = "video/mp4";
            video.appendChild(source);
            video.load();
            video.classList.remove("lazy-video");
          });
        }

        /* ======================
           LIGHTBOX + THUMBNAILS
           ====================== */
        const wrappers = Array.from(
          document.querySelectorAll(".td-portfolio-filter-wrapper")
        );
        const overlayLB = document.getElementById("lightboxOverlay");
        const lbMainArea = document.getElementById("lbMainArea");
        const lbThumbs = document.getElementById("lbThumbs");
        const closeBtn = document.getElementById("lightboxClose");
        const prevBtn = document.getElementById("lbPrev");
        const nextBtn = document.getElementById("lbNext");
        const loader = document.getElementById("lbLoader");

        // Build gallery array using DOM order; capture type and src for both image and video
        const gallery = wrappers
          .map((wrap) => {
            const img = wrap.querySelector("img");
            const video = wrap.querySelector("video");
            if (img) {
              return {
                type: "image",
                src: img.dataset ? img.dataset.src || img.src : img.src,
                thumb: img.dataset ? img.dataset.src || img.src : img.src,
                alt: img.alt || "",
              };
            }
            if (video) {
              // try dataset or nested source
              const vsrc = video.dataset
                ? video.dataset.src
                : video.querySelector("source")
                ? video.querySelector("source").src
                : "";
              // find a thumbnail poster if provided else use a static frame (first frame) or a placeholder
              // If you have poster images for videos, set data-thumb on the video tag in HTML (recommended).
              const thumb =
                video.dataset && video.dataset.thumb
                  ? video.dataset.thumb
                  : video.dataset && video.dataset.poster
                  ? video.dataset.poster
                  : "assets/img/video-thumb-placeholder.jpg";
              return { type: "video", src: vsrc, thumb: thumb, alt: "" };
            }
            return null;
          })
          .filter(Boolean);

        // build thumbnails DOM once
        function buildThumbs() {
          lbThumbs.innerHTML = "";
          gallery.forEach((item, i) => {
            const t = document.createElement("button");
            t.className = "lb-thumb";
            t.setAttribute("data-index", i);
            t.setAttribute("aria-label", "Open item " + (i + 1));
            t.setAttribute("type", "button");
            // set tabindex for keyboard navigation
            t.tabIndex = 0;

            if (item.type === "image") {
              const im = document.createElement("img");
              im.src = item.thumb || item.src;
              im.alt = item.alt || "thumb " + (i + 1);
              t.appendChild(im);
            } else {
              const im = document.createElement("img");
              im.src = item.thumb || "assets/img/video-thumb-placeholder.jpg";
              im.alt = "video thumb " + (i + 1);
              t.appendChild(im);
            }

            // click handling
            t.addEventListener("click", (e) => {
              const idx = parseInt(t.getAttribute("data-index"), 10);
              showLightbox(idx, true);
            });

            // keyboard support (Enter / Space)
            t.addEventListener("keydown", (e) => {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                const idx = parseInt(t.getAttribute("data-index"), 10);
                showLightbox(idx, true);
              }
            });

            lbThumbs.appendChild(t);
          });
        }

        let currentIndex = 0;

        function showLoader(show) {
          loader.style.display = show ? "block" : "none";
        }

        // Preload helper - also used to preload next/prev
        function preloadResource(item) {
          if (!item || !item.src) return;
          if (item.type === "image") {
            const link = document.createElement("link");
            link.rel = "preload";
            link.as = "image";
            link.href = item.src;
            link.dataset.tmp = "true";
            document.head.appendChild(link);
          } else if (item.type === "video") {
            const link = document.createElement("link");
            link.rel = "preload";
            link.as = "video";
            link.href = item.src;
            link.dataset.tmp = "true";
            document.head.appendChild(link);
          }
        }

        function clearPreloads() {
          document
            .querySelectorAll("link[data-tmp]")
            .forEach((n) => n.remove());
        }

        // render main preview depending on index
        function renderMain(item) {
          lbMainArea.innerHTML = ""; // clear
          if (!item) return;
          if (item.type === "image") {
            const img = new Image();
            img.alt = item.alt || "";
            img.onload = function () {
              showLoader(false);
              lbMainArea.innerHTML = "";
              img.className = "lb-main-media";
              lbMainArea.appendChild(img);
              // focus for a11y
              img.tabIndex = -1;
              try {
                img.focus();
              } catch (e) {}
            };
            img.onerror = function () {
              showLoader(false);
              lbMainArea.innerHTML =
                '<div style="color:#fff">Unable to load image</div>';
            };
            showLoader(true);
            img.src = item.src;
          } else {
            const video = document.createElement("video");
            video.controls = true;
            video.autoplay = true;
            video.playsInline = true;
            video.style.maxHeight = "78vh";
            video.setAttribute("aria-label", "Video preview");
            const source = document.createElement("source");
            source.src = item.src;
            source.type = "video/mp4";
            video.appendChild(source);
            video.onloadeddata = function () {
              showLoader(false);
              lbMainArea.innerHTML = "";
              lbMainArea.appendChild(video);
              try {
                video.focus();
              } catch (e) {}
            };
            video.onerror = function () {
              showLoader(false);
              lbMainArea.innerHTML =
                '<div style="color:#fff">Unable to load video</div>';
            };
            showLoader(true);
            video.load();
          }
        }

        // highlight active thumbnail and ensure it's visible (center-ish)
        function highlightThumb(index) {
          const all = lbThumbs.querySelectorAll(".lb-thumb");
          all.forEach((n) => n.classList.remove("active"));
          const active = lbThumbs.querySelector(
            '.lb-thumb[data-index="' + index + '"]'
          );
          if (active) {
            active.classList.add("active");
            // scroll active thumbnail into center-ish view
            const containerRect = lbThumbs.getBoundingClientRect();
            const btnRect = active.getBoundingClientRect();
            const offset =
              btnRect.left -
              containerRect.left -
              containerRect.width / 2 +
              btnRect.width / 2;
            lbThumbs.scrollBy({ left: offset, behavior: "smooth" });
            try {
              active.focus();
            } catch (e) {}
          }
        }

        function showLightbox(index, calledByThumb = false) {
          if (!gallery.length) return;
          currentIndex = (index + gallery.length) % gallery.length;
          overlayLB.style.display = "flex";
          overlayLB.setAttribute("aria-hidden", "false");

          // set focus trap start
          closeBtn.focus();

          // preload neighbors
          clearPreloads();
          preloadResource(gallery[(currentIndex + 1) % gallery.length]);
          preloadResource(
            gallery[(currentIndex - 1 + gallery.length) % gallery.length]
          );

          renderMain(gallery[currentIndex]);
          highlightThumb(currentIndex);
        }

        // attach click/keydown listeners to wrappers to open respective index
        wrappers.forEach((wrap, i) => {
          wrap.addEventListener("click", () => {
            showLightbox(i);
          });
          wrap.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              showLightbox(i);
            }
          });
        });

        // Close
        function closeLightbox() {
          overlayLB.style.display = "none";
          overlayLB.setAttribute("aria-hidden", "true");
          lbMainArea.innerHTML = "";
          clearPreloads();
          // return focus to last focused element outside lightbox
          // We choose to focus first wrapper that corresponds to currentIndex (if present)
          const targetWrap = wrappers[currentIndex];
          if (targetWrap && typeof targetWrap.focus === "function") {
            try {
              targetWrap.focus();
            } catch (e) {}
          }
        }
        closeBtn.addEventListener("click", closeLightbox);
        overlayLB.addEventListener("click", (e) => {
          if (e.target === overlayLB) closeLightbox();
        });

        // Prev / Next
        function goto(delta) {
          showLightbox(currentIndex + delta);
        }
        nextBtn.addEventListener("click", () => goto(1));
        prevBtn.addEventListener("click", () => goto(-1));

        // keyboard navigation
        document.addEventListener("keydown", (e) => {
          if (overlayLB.style.display !== "flex") return;
          if (e.key === "Escape") closeLightbox();
          if (e.key === "ArrowRight") goto(1);
          if (e.key === "ArrowLeft") goto(-1);
        });

        // swipe support inside main area
        (function addSwipeSupport() {
          let startX = 0,
            startY = 0,
            isMoving = false,
            threshold = 30;
          lbMainArea.addEventListener(
            "touchstart",
            (e) => {
              if (!e.touches || e.touches.length > 1) return;
              startX = e.touches[0].clientX;
              startY = e.touches[0].clientY;
              isMoving = true;
            },
            { passive: true }
          );
          lbMainArea.addEventListener(
            "touchmove",
            (e) => {
              if (!isMoving || !e.touches || e.touches.length > 1) return;
              const dx = e.touches[0].clientX - startX;
              const dy = e.touches[0].clientY - startY;
              if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > threshold) {
                if (dx < 0) goto(1);
                else goto(-1);
                isMoving = false;
              }
            },
            { passive: true }
          );
          lbMainArea.addEventListener("touchend", () => {
            isMoving = false;
          });
        })();

        // Focus trap inside lightbox: keep focus inside overlay when open
        (function focusTrap() {
          const focusableSelectors =
            'a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])';
          let lastFocused = null;
          document.addEventListener("focusin", (e) => {
            if (overlayLB.style.display === "flex") {
              if (!overlayLB.contains(e.target)) {
                e.stopPropagation();
                closeBtn.focus();
              }
            } else {
              lastFocused = e.target;
            }
          });
          closeBtn.addEventListener("click", () => {
            if (lastFocused)
              try {
                lastFocused.focus();
              } catch (e) {}
          });
        })();

        // build thumbs on ready
        buildThumbs();

        // mark first thumb active by default (if needed)
        if (gallery.length) highlightThumb(0);
      })();
    </script>
  </body>
</html>
